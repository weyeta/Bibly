<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Lector de Códigos de Barras</title>
  <script src="https://unpkg.com/@zxing/browser@latest"></script>
</head>
<body>
  <h1>Escanear Código de Barras</h1>
  <video id="video" width="300" height="200" style="border: 1px solid gray"></video>
  <p>Resultado: <span id="result"></span></p>

  <script>
    window.addEventListener('load', function () {
      const codeReader = new ZXing.BrowserMultiFormatReader();
      const videoElement = document.getElementById('video');
      const resultElement = document.getElementById('result');

      // Obtener los dispositivos de video disponibles
      codeReader.listVideoInputDevices()
        .then((videoInputDevices) => {
          // Seleccionar el primer dispositivo disponible (puede ajustarse según necesidad)
          const selectedDeviceId = videoInputDevices[0].deviceId;

          // Iniciar la decodificación desde el dispositivo de video seleccionado
          codeReader.decodeFromVideoDevice(selectedDeviceId, videoElement, (result, err) => {
            if (result) {
              // Mostrar el resultado cuando se detecta un código
              resultElement.textContent = result.text;
              console.log(result);
            }
            if (err && !(err instanceof ZXing.NotFoundException)) {
              console.error(err);
            }
          });
        })
        .catch((err) => {
          console.error(err);
        });
    });
  </script>
</body>
</html>
